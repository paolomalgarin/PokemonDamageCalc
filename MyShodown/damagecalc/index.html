<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Damage Calculator</title>

    <link rel="shortcut icon" href="../public/img/logo-small.svg" type="image/x-icon">
    <link rel="stylesheet" href="../public/css/base-style.css">
    <link rel="stylesheet" href="../public/css/damagecalc/index.css">
</head>

<body>
    <main>
        <div class="calc_form">
            <div class="option-container">
                <div id="pkmn-container-1" class="pkmn-container"></div>
                <div id="field-options-container">
                    <button id="pkmn-number-option" onclick="updatePkmn(event)" value="1">Pkmn 1</button>
                    <button id="move-number-option" onclick="updateMove(event)" value="0">Move 1</button>
                </div>
                <div id="pkmn-container-2" class="pkmn-container"></div>
            </div>

            <!-- OPERAZIONI (Calcola reset ...) -->
            <div class="operations">
                <div class="btn" onclick="alert('Non possiamo ancora calcolare il danno!')">CALC</div>
            </div>
        </div>
        </div>
    </main>

    <!-- Scripts -->
    <script src="../public/js/button_gui.js"></script>
    <script src="../public/js/damagecalc/structure-maker.js"></script>
    <script src="../public/js/damagecalc/api-fetcher.js"></script>
    <script>
        const pkmnContainer1 = document.getElementById('pkmn-container-1');
        const pkmnContainer2 = document.getElementById('pkmn-container-2');

        createPkmnContainerStructure_GENERIC(pkmnContainer1, 'pkmn1', 'Pokemon 1', 'Abomasnow');
        createPkmnContainerStructure_GENERIC(pkmnContainer2, 'pkmn2', 'Pokemon 2', 'Abomasnow');

        const updatePkmn = (e) => {
            console.log(e.target);
            if(e.target.value == 1) {
                e.target.value = 2;
                e.target.innerText = 'Pkmn 2';
            } else if (!e.target.value || e.target.value == 2) {
                e.target.value = 1;
                e.target.innerText = 'Pkmn 1';
            }
        }

        const updateMove = (e) => {
            console.log(e.target);
            if(e.target.value < 3) {
                e.target.value = Number(e.target.value) + 1;
                e.target.innerText = 'Move ' + (Number(e.target.value) + 1);
            } else {
                e.target.value = 0;
                e.target.innerText = 'Move 1';
            }
        }

        let pkmnNumber = document.getElementById('pkmn-number-option').value;
        let moveNumber = document.getElementById('move-number-option').value;

        let attackerLvl = document.getElementById(`pkmn${pkmnNumber}-level`).value;
        let moveBsp = document.getElementById(`pkmn${pkmnNumber}-move-bsp-${moveNumber}`).value;

        // calc_generic_damage_in_perc(attackerLvl, moveBsp, ...) //continua

    </script>
</body>

</html>